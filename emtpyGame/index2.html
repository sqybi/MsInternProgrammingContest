<!DOCTYPE html>
<html>
	<head>
		<title>Game is on!!!</title>
		<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1" />
		<style>
			html, body{
				padding: 0;
				margin: 0;
				width: 100%;
				height: 100%;
			}
		</style>
	</head>
	<body>
		<canvas width="1000" height="600"></canvas>
	</body>
	<script type="text/javascript" src="jquery.js"></script>
	<script src="socket.io/socket.io.js"></script>
	<script>
	try {
		  var socket = io.connect('http://localhost');
		  socket.on('data', function (data) {
			window.recieve(data);
		  });
		  
	  }
	  catch (ex) {
		//server not running, ignore
		alert(ex.toString());
	  }
	  window.broadcast = function(data) {
		if (window.socket) {
			socket.emit('data', data);
		}
	  }
	</script>
	<script>
		function guidGenerator() {
			var S4 = function() {
				return (((1+Math.random())*0x10000)|0).toString(16).substring(1);
			};
			return (S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4());
		}
		var clientID = guidGenerator(),
			 canvas = document.getElementsByTagName('canvas')[0],
			 width = canvas.width,
			 height = canvas.height,
			 ctx = canvas.getContext('2d'),
			 server = window.now || {};
	</script>
	<script type="text/javascript" src="intersection.js"></script>
	<script type="text/javascript" src="server.js"></script>
	<script>
		$(document.body).on('keydown', function(e) {
			switch (e.which) {
				case 37:
					window.keyPress('left');
					break;
				case 39:
					window.keyPress('right');
					break;
				case 38:
					window.keyPress('up');
					break;
				case 40:
					window.keyPress('down');
					break;
				default:
					window.keyPress(String.fromCharCode(e.which).toLowerCase());
					break;
			}
		});
	</script>
</html>
