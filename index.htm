<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head>
        <title>Marble^4!</title>
        <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1" />
        <style>
            canvas {
                position: absolute;
                left: 10px;
                top: 10px;
            }
        </style>
    </head>
    <body>
        <canvas width="975" height="624" visible="true"></canvas>
        <canvas width="975" height="624" visible="false"></canvas>
        <div style="position: absolute; margin: 634px auto auto auto; width: 975; font:12pt arial,sans-serif;" >
            Any problem when playing the game? Follow the instructions <a href="readme.htm">here</a>! By the way, if your browser is Internet Explorer, use Chrome instead.
        </div>
    </body>
    <script type="text/javascript" src="jquery.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script type="text/javascript" src="intersection.js"></script>
    <script>
        function guidGenerator() {
            var S4 = function() {
                return (((1+Math.random())*0x10000)|0).toString(16).substring(1);
            };
            return (S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4());
        }
        var clientID = guidGenerator(),
            allCanvas = document.getElementsByTagName('canvas'),
            ctx = [allCanvas[0].getContext('2d'), allCanvas[1].getContext('2d')],
            currentCanvas = 0,
            server = window.now || {};

        $(document.body).on('keydown', function(e) {
            switch (e.which) {
                case 37:
                    window.KeyPress('left');
                    break;
                case 39:
                    window.KeyPress('right');
                    break;
                case 38:
                    window.KeyPress('up');
                    break;
                case 40:
                    window.KeyPress('down');
                    break;
                default:
                    window.KeyPress(String.fromCharCode(e.which).toLowerCase());
                    break;
            }
        });
	$(document).mousemove(function(e){
		MouseMovedEventHandler({x:e.pageX, y:e.pageY});
	});
    </script>
    <script type="text/javascript" src="client.js"></script>
</html>

